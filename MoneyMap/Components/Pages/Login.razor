@page "/login"
@layout LoginLayout
@using System.ComponentModel.DataAnnotations
@using MoneyMap.Components.Layout
@inject NavigationManager NavigationManager

<div class="outer-box" style="width: 1000px; height: 800px; border: 1px solid #e0e0e0; padding: 20px;">
    <div class="logo-section" style="text-align: left; margin-bottom: 30px;">
        <MudText Typo="Typo.h4" Style="display: inline-flex; align-items: center;">

            MoneyMap
        </MudText>
    </div>

    <div class="inner-box" style="background-color: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);">
        <EditForm Model="@model" OnValidSubmit="OnValidSubmit">
            <DataAnnotationsValidator />
            <MudGrid>
                <MudItem xs="12">
                    <MudCard Elevation="0">
                        <MudCardContent>
                            <MudTextField
                                Label="Username"
                                @bind-Value="model.Username"
                                For="@(() => model.Username)"
                                Variant="Variant.Outlined"
                                Class="mb-3" />

                            <MudTextField
                                Label="Password"
                                @bind-Value="model.Password"
                                For="@(() => model.Password)"
                                InputType="InputType.Password"
                                Variant="Variant.Outlined"
                                Class="mb-3" />
                            
                        </MudCardContent>
                        <MudCardActions>
                            <MudButton
                                ButtonType="ButtonType.Submit"
                                Variant="Variant.Filled"
                                Color="Color.Primary"
                                Size="Size.Large"
                                FullWidth="true">
                                Login
                            </MudButton>
                        </MudCardActions>
                        <div style=" margin-top: 10px; text-align: center;">
                            <span>Not Registered? </span>
                            <NavLink href="/" style="color: #007bff; text-decoration: none;">Register</NavLink>
                        </div>
                    </MudCard>
                </MudItem>
            </MudGrid>
        </EditForm>
    </div>
</div>




@code {
    private LoginModel model = new();
    
    private void OnValidSubmit()
    {
        if (model.Username == "admin" && model.Password == "admin") // Replace with real authentication
        {
            NavigationManager.NavigateTo("/dashboard");
        }
        else
        {
            // Show error message
        }
    }

    public class LoginModel
    {
        public LoginModel()
        {
            Username = string.Empty;
            Password = string.Empty;
            Currency = string.Empty;
        }

        [Required(ErrorMessage = "Username is required")] 
        public string Username { get; set; }

        [Required(ErrorMessage = "Password is required")] 
        public string Password { get; set; }

        [Required(ErrorMessage = "Currency is required")]
        public string Currency { get; set; }
    }
}
